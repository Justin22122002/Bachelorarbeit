import csv
import os


class CSVReader:
    def __init__(self, folder: str):
        self.folder: str = folder

    def load_data(self) -> dict[str, list[dict[str, str]]]:
        """
        Load data from all CSV files in the specified folder.

        Returns:
        - dict[str, list[dict[str, str]]]: A dictionary where each key is the CSV file name (without extension)
          and the value is a list of dictionaries representing the rows.
        """
        data_map: dict[str, list[dict[str, str]]] = {}

        for filename in os.listdir(self.folder):
            if filename.endswith('.csv'):
                file_path: str = os.path.join(self.folder, filename)
                with open(file_path, mode='r') as file:
                    reader: DictReader = csv.DictReader(file)
                    data_map[filename[:-4]] = []  # Use the filename without extension as key

                    for row in reader:
                        data_map[filename[:-4]].append(row)

        return data_map